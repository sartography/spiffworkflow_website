<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    
<meta property="og:title" content="Data Objects in SpiffWorkflow" />
<meta property="og:description" content="A thorough explanation of BPMN&#39;s Data Objects and how they can be used within SpiffWorkflow." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/deep_dives/data_objects/" /><meta property="og:image" content="http://localhost:1313/images/articles/data_object_thumbnail.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-13T10:00:00-05:00" />
<meta property="article:modified_time" content="2022-09-13T10:00:00-05:00" />



<meta name="description" content="Business Process Automation with BPMN and Python.  Connect people and software together in a way that makes sense to everyone." />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">


    <title>Data Objects in SpiffWorkflow, SpiffWorkflow</title>
    
<link rel="icon" type="image/png" href="/images/favicon.png" />
<link href="https://fonts.googleapis.com/css?family=Open&#43;Sans:400,600" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/style.css">
<link rel="stylesheet" type="text/css" href="/css/icons.css">

<link rel="stylesheet" href="/css/owl.carousel.min.css">
<link rel="stylesheet" href="/css/owl.theme.default.min.css">
<link rel="stylesheet" type="text/css" href="/css/custom_sartography_7.css">

<link rel="stylesheet" type="text/css" href="/css/cookieconsent.css">
  </head>
  <body>
    
    
    <div id="preloader">
      <div id="status"></div>
    </div>
    

    

    

<nav class="navbar is-fresh is-transparent no-shadow" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="/images/logos/spiffworkflow_logo.png" alt="" width="138" height="28">
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbar-menu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

      <div id="navbar-menu" class="navbar-menu is-static">

        <div class="navbar-end">
          <a href="/pages/get_started/" class="navbar-item is-secondary">
            Get Started
          </a>
          <a href="/pages/features/" class="navbar-item is-secondary">
            Features
          </a>
          <a href="/pages/compare/" class="navbar-item is-secondary">
            Comparison
          </a>
          <a href="/pages/support/" class="navbar-item is-secondary">
            Support
          </a>
          <a href="/pages/docs/" class="navbar-item is-secondary">
            Documentation
          </a>
        </div>
        <a href="/pages/enterprise" class="navbar-item">
            <span id="try_now_button" class="button signup-button rounded primary-btn raised">
              Try Now
            </span>
        </a>
      </div>
  </div>
</nav>



<nav id="navbar-clone" class="navbar is-fresh is-transparent" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="/images/logos/spiffworkflow_logo.png" alt="" width="138" height="138">
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="cloned-navbar-menu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="cloned-navbar-menu" class="navbar-menu is-fixed">

      <div class="navbar-end">
        <a href="/pages/get_started/" class="navbar-item is-secondary">
          Get Started
        </a>
        <a href="/pages/features/" class="navbar-item is-secondary">
          Features
        </a>
        <a href="/pages/compare/" class="navbar-item is-secondary">
          Comparison
        </a>
        <a href="/pages/support/" class="navbar-item is-secondary">
          Support
        </a>
        <a href="/pages/docs/" class="navbar-item is-secondary">
          Documentation
        </a>
      </div>
    </div>
</div>
</nav>


<section class="section is-medium  ">
  <div class="container">
    <div class="columns">
      <div class="column is-centered-tablet-portrait">
        <h1 class="title section-title">Data Objects in SpiffWorkflow</h1>
        <h5 class="subtitle is-5 is-muted">Or, “A diagram of Love”</h5>
        <div class="divider"></div>
      </div>
    </div>
    <div class="content">
      <p><img src="intro.png" alt="Intro diagram"></p>
<h3 id="a-simple-default">A Simple Default</h3>
<p>One of the benefits of both BPMN and Python is they have long low-sloped learning curves.
Things are simple by default, but have the ability to grow to meet far more complex situations.
As we introduce new concepts into SpiffWorkflow, we want the default behavior to be equally intuitive and powerful.</p>
<p>In SpiffWorkflow, data follows the process flow.
Each task receives all data from the previously executed task.</p>
<p><img src="default.png" alt="Default Data Flow"></p>
<p>As such, you can expect your web form submission to be available as variables in the following service task.
And the variables you create in that task will be available to the next task, and so on.</p>
<p>We call this type of data <strong>Task Data</strong>, because it belongs to the task.
Each task has full control over the information it receives, and can choose to pass the data on unaffected, or make any changes to it, including clearing it out completely.</p>
<p>This is different from how many BPMN-based systems work, but we feel it creates a very intuitive and easy-to-learn system.
It has some limitations, particularly as your diagrams become larger and more complex.
At this point, BPMN Developers may need more control.</p>
<h3 id="data-objects">Data Objects</h3>
<p>Data Objects are graphical notations that allow BPMN Developers to control which tasks have access to which variables.
As we will demonstrate below, this ability has some far-reaching implications, and can become a critical tool as your BPMN structures grow in size and complexity.</p>
<p><img src="data_object.png" alt="A Data Object"></p>
<p>Rather than feed you a list of rules, we’ll cover the full definition of these notations in a detailed example later in the article.</p>
<p>But first, we want to introduce you to one more common task with data: transforming it.
This is important as you will often need to change the shape of information as you use it for different purposes.</p>
<h3 id="data-mapping-and-transformations">Data Mapping and Transformations</h3>
<p>We added the ability to associate Pre-Scripts and Post-Scripts to most task types in the bpmn-js modeler extensions we’ve created.
We found our diagrams were getting overloaded with Script Tasks, but they were the fastest and easiest way to munge data, i.e., convert it from one form to another.
So now all tasks can execute small scripts if they need to alter the structure of information before it comes in, or as it leaves.
Since these are scripts and can contain most any python code, they also open the opportunity to perform assertions — so you can “Fail Fast” (a respected software development idiom that encourages uncovering issues as soon as possible) by checking to see that data is in the right form before attempting to use it.</p>
<h4 id="an-example">An Example</h4>
<p>In this example, we will model a pizza delivery service that will cover placing the order, selecting the pizza, providing a credit card, and sending the pizza off to the delivery team.
In the process, we will describe how SpiffWorkflow can solve the problem using its default behavior, then cover the major benefits of using Data Objects to manage specific situations.</p>
<p><img src="example.png" alt="A Simple Example"></p>
<p>This diagram will work in SpiffWorkflow as is, and each task would gather more information, add it to the Task Data, and then send a new copy of that data on to the next task in the flow.
The benefit here is you don’t have to model the data at all.
It’s clear where information is coming from, and that it will be available when you need it.
The data and the flow are one and the same.
The problem is that the Credit Card task would be passed in a list of all 500 available pizza toppings — information it really doesn’t likely need.
Worse, the data we provided in credit card details will be passed on to the task for making pizza or sent off in the external call activity, data exposure which is unnecessary and potentially unsafe.</p>
<h4 id="rule-1-use-data-objects-to-reference-information-that-will-not-change">Rule #1: Use Data Objects to reference information that will not change</h4>
<p><img src="rule1.png" alt="Rule 1"></p>
<p>If we add a BPMN Data Object called “toppings,” and Load Pizza Toppings produces a variable called “toppings,” that variable is now treated as a Data Object in SpiffWorkflow.
It is not passed along as a part of the Task Data.
It is available for the next task, because we connect it with a Data Association (the dotted arrows).
This saves us from holding multiple copies of this data in tasks where it is not relevant.
It will make the model far more efficient to store and execute, and it will keep this data out of subsequent tasks that do not need it.
Were another task later in the workflow to need to reference the list (say we wanted to display a detailed list of the ingredients in the final order summary), we could just link that task to toppings as well, and there is still only one actual list of toppings stored with the process.</p>
<h4 id="rule-2-use-data-stores-to-persist-information">Rule #2: Use Data Stores to persist information</h4>
<p><img src="rule2.png" alt="Rule 2"></p>
<p>If there is information that should persist beyond the scope of the process, you can use the Data Store to reference it.
SpiffWorkflow will provide hooks for making this information available, but it will require some work on the part of the calling application, as Data Stores will be specific to both the implementation (the type of database in use) and the domain (orders here would be connected to the user account, but you might also save information relative to one of many delivery addresses).</p>
<h4 id="rule-3-do-not-use-data-objects-to-track-things-that-are-modified-along-the-way">Rule #3: Do NOT use Data Objects to track things that are modified along the way</h4>
<p><img src="rule3.png" alt="Rule 3"></p>
<p>Since almost all of the tasks here will need to deal with the order details, it is helpful NOT to make it a Data Object.
It is far better to allow it to pass from task to task as we add additional information to the order.
The process will do things like adding the calculated costs, showing that the payment is complete, and determining if the cheap gluttonous jerks bothered to leave any kind of tip for the driver.</p>
<h4 id="rule-4-do-use-data-objects-to-limit-access-to-information">Rule #4: Do Use Data Objects to limit access to information</h4>
<p><img src="rule4.png" alt="Rule 4"></p>
<p>Only two tasks need access to the Credit Card information, and it isn’t something we need or want to keep copying to later tasks.
So we can split it off here and isolate access to it.</p>
<h4 id="rule-5-data-composition-should-match-the-model-composition">Rule #5: Data composition should match the model composition</h4>
<p><img src="rule5.png" alt="Rule 5"></p>
<p>The example above is a good candidate for a Call Activity.
In this example, we use Data Objects to share information with the Call Activity, which defines its required parameters with a Data Input, shown below.
The Data Input is used here to indicate that an Invoice is required by this Process, and SpiffWorkflow will throw an exception if data by this name is not available.
The process below further promises to provide a “receipt” as output.</p>
<p>Here is a quick video showing Data Inputs and Data Outputs in action:
<div class="container">
    <div id="player-wrapper" class="my-5"></div>
</div>

<script
        type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@clappr/player@latest/dist/clappr.min.js"
>
</script>

<script>
  var playerElement = document.getElementById("player-wrapper");

  var player = new Clappr.Player({
    source: "/videos/data_inputs.mp4",
  mute: true,
    height: 360,
    width: 500
  });

  player.attachTo(playerElement);
</script>
</p>
<p><img src="receipt.png" alt="A Receipt"></p>
<h2 id="two-types-of-data">Two Types of Data</h2>
<p>I hope these examples were helpful.
Just to reiterate, there are two different types of Data in SpiffWorkflow, and they behave slightly differently.
Here is an overview of their behavior for reference:</p>
<h3 id="task-data">Task Data</h3>
<p>Task Data is information that belongs to the TASK.
It is most useful within a single process model that does not contain large amounts of information.</p>
<ul>
<li>Task Data is thread-safe by nature, as the data follows the Flow (arrows) of the BPMN diagram.</li>
<li>Task Data is transferred by default. Any variables created by forms, decision tables, and scripts are passed on in the Task Data.</li>
<li>Task Data behaves like a pipeline architecture. Each task has control over the data and may alter it in any way before passing it on.</li>
<li>Each completed task in a workflow will retain a copy of the data as it was when the task executed. “Rewinding” to a previously completed task would allow access to the Task Data as it was when the Task was first executed.</li>
<li>Task Data can be directly referenced by name in script tasks, gateways, forms in user tasks, and decision tables.</li>
</ul>
<h3 id="data-objects-1">Data Objects</h3>
<p>Data Objects are information that belongs to the PROCESS.
It offers encapsulation as well as control over data from within the BPMN diagram.
Data Objects are most useful when decomposing complex diagrams into call activities, referencing a large data set, or protecting sensitive information.</p>
<ul>
<li>It is represented and controlled by BPMN Data Objects, Data Inputs, Data Outputs, and Data Stores, which are all visible elements in the BPMN Diagram.</li>
<li>A Data Object is scoped to the process in which it is defined.</li>
<li>A Data Object can be used to share data with a Call Activity through Data Inputs and Data Outputs.</li>
<li>A Data Object is defined by a name, and during execution, a variable by this name is guaranteed to exist for all connected tasks.</li>
<li>Parallel tasks can share a data object and see changes immediately. This is not true of Task Data.</li>
</ul>
<p>As Bruno Paré-Simard pointed out in a recent GitHub Issue, we should find ways to Type our Data Objects to assure they meet a certain data structure, or can be mapped to a specific class, and we are considering ways to make this happen while respecting the BPMN standard.</p>
<h2 id="references-and-further-reading">References and Further Reading</h2>
<p>The implementation of BPMN Data Objects, Data Inputs, and Data Outputs has, at times, been hotly debated, as you can find in the comments of this article from BPMN expert Bruce Silver: <a href="https://www.trisotech.com/bpmn-decoded-data-flow/">https://www.trisotech.com/bpmn-decoded-data-flow/</a></p>
<p>We looked at a number of existing BPMN-based products to see how they handled Data, and they took widely divergent approaches.
We looked closely at some other BPMN implementations as we formulated our approach.</p>
<p>Camunda <a href="https://docs.camunda.io/docs/components/best-practices/development/handling-data-in-processes/">avoids the use of BPMN’s Data Objects</a> and prefers its own proprietary method for transferring data between tasks, as they describe in their documentation.</p>
<p>Flowable <a href="https://www.flowable.com/open-source/docs/bpmn/ch07b-BPMN-Constructs/#passing-variables">follows this same trend</a>, evolving away from the BPMN spec and using extension elements to handle the exchange of data.</p>
<p>Trisotech favors using Data Objects for all data, and sticks close to the standard as described in this recent Bruce Silver article: <a href="https://methodandstyle.com/executable-bpmn-vs-method-and-style/">https://methodandstyle.com/executable-bpmn-vs-method-and-style/</a></p>
<p>In our opinion, these all seem to create difficult interfaces for Citizen Developers (folks from other domains that have picked up programming skills along the way) — and we are hoping that our approach makes it a little easier for people to develop BPMN diagrams without having to understand everything from the very beginning.</p>

    </div>
  </div>
</section>



    
<footer class="footer footer-dark">
  <div class="container">
    <div class="columns">
      <div class="column">
        <div class="footer-logo">
          <img src="/images/logos/spiffworkflow_white.svg">
        </div>
        <div class="cookie_settings">
          <a data-cc="c-settings">Show cookie settings</a>
        </div>
      </div>
        <div class="column">
          <div class="footer-column">
            <div class="footer-header">
                <h3>Videos</h3>
            </div>
            <ul class="link-list">
              <li>
                <a href="https://www.youtube.com/watch?v=1IaiaquQ0y0&amp;t=15s">
                  Building Web Forms
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=876q2s5fwUY&amp;t=1s">
                  Brief Demo
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=EfTbTg3KRqc">
                  Building an Approval Process
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/channel/UCtDHzDfhyvnAb8CFmdwucUA">
                  more videos...
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="column">
          <div class="footer-column">
            <div class="footer-header">
                <h3>Docs</h3>
            </div>
            <ul class="link-list">
              <li>
                <a href="https://spiff-arena.readthedocs.io/en/latest/">
                  SpiffWorkflow Application
                </a>
              </li>
              <li>
                <a href="https://spiffworkflow.readthedocs.io/en/latest/">
                  SpiffWorkflow Library
                </a>
              </li>
              <li>
                <a href="/pages/privacy_policy/">
                  Privacy Policy
                </a>
              </li>
              <li>
                <a href="/pages/demo_terms_of_service/">
                  Terms of Service
                </a>
              </li>
              <li>
                <a href="/pages/service_level/">
                  Service Level Expectations
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="column">
          <div class="footer-column">
            <div class="footer-header">
                <h3>Blog</h3>
            </div>
            <ul class="link-list">
              <li>
                <a href="/posts/articles/get_started/">
                  Get started
                </a>
              </li>
              <li>
                <a href="/posts/articles/">
                  Introductory Articles
                </a>
              </li>
              <li>
                <a href="/posts/deep_dives/">
                  Deep Dives
                </a>
              </li>
            </ul>
          </div>
        </div>
      <div class="column">
        <div class="footer-column">
          <div class="footer-header">
            <h3>Connect</h3>
            <nav class="level is-mobile">
              <div class="level-left">
                <a class="level-item" href="https://discord.gg/F6Kb7HNK7B">
                  <span class="icon"><i class="fa fa-comments"></i></span>
                </a>
                <a class="level-item" href="https://github.com/sartography">
                  <span class="icon"><i class="fa fa-github"></i></span>
                </a>
                <a class="level-item" href="https://www.youtube.com/channel/UCtDHzDfhyvnAb8CFmdwucUA">
                  <span class="icon"><i class="fa fa-youtube"></i></span>
                </a>
                <a class="level-item" href="https://twitter.com/SpiffWorkflow">
                  <span class="icon"><i class="fa fa-twitter"></i></span>
                </a>
                <a class="level-item" href="https://spiffworkflow.readthedocs.io/en/latest/index.html">
                  <span class="icon"><i class="fa fa-book"></i></span>
                </a>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>


    
    <div id="backtotop"><a href="#"></a></div>

    
<div class="sidebar">
  <div class="sidebar-header">
    <img src="/images/logos/%25!s%28%3cnil%3e%29.svg">
    <a class="sidebar-close" href="javascript:void(0);">
      <i data-feather="x"></i>
    </a>
  </div>
  <div class="inner">
    <ul class="sidebar-menu">
    </ul>
  </div>
</div>

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://unpkg.com/feather-icons"></script>
<script src="/js/fresh.js"></script>
<script src="/js/jquery.panelslider.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/carousel.js"></script>

<script defer src="/js/cookieconsent.js"></script>
<script defer src="/js/cookieconsent-init.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

<link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
<script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>


<script>
  
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}

  
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied'
  });
</script>


<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NFMNL96Z');</script>




<script type="text/javascript">
  (function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "iyrm5frdjh");
</script>


  </body>
</html>
